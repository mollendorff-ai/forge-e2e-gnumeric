# E2E Math Function Edge Cases
# v6.1.0 - Edge cases, boundary conditions, and error scenarios
# Validated against Gnumeric

_forge_version: "1.0.0"

assumptions:
  # ═══════════════════════════════════════════════════════════════════════════
  # EDGE CASES: Zero handling
  # ═══════════════════════════════════════════════════════════════════════════
  zero_abs:
    value: null
    formula: "=ABS(0)"            # Expected: 0
  zero_sqrt:
    value: null
    formula: "=SQRT(0)"           # Expected: 0
  zero_mod_dividend:
    value: null
    formula: "=MOD(0, 5)"         # Expected: 0
  zero_floor:
    value: null
    formula: "=FLOOR(0, 1)"       # Expected: 0
  zero_ceiling:
    value: null
    formula: "=CEILING(0, 1)"     # Expected: 0
  zero_sign:
    value: null
    formula: "=SIGN(0)"           # Expected: 0
  zero_trunc:
    value: null
    formula: "=TRUNC(0)"          # Expected: 0
  zero_int:
    value: null
    formula: "=INT(0)"            # Expected: 0
  zero_round:
    value: null
    formula: "=ROUND(0, 2)"       # Expected: 0
  zero_exp:
    value: null
    formula: "=EXP(0)"            # Expected: 1
  zero_power:
    value: null
    formula: "=POWER(0, 5)"       # Expected: 0
  zero_base_one_exp:
    value: null
    formula: "=POWER(5, 0)"       # Expected: 1
  zero_radians:
    value: null
    formula: "=RADIANS(0)"        # Expected: 0
  zero_degrees:
    value: null
    formula: "=DEGREES(0)"        # Expected: 0

  # ═══════════════════════════════════════════════════════════════════════════
  # EDGE CASES: Negative numbers
  # ═══════════════════════════════════════════════════════════════════════════
  neg_abs:
    value: null
    formula: "=ABS(-999999)"      # Expected: 999999
  neg_mod_dividend:
    value: null
    formula: "=MOD(-10, 3)"       # Expected: -1 (varies by implementation)
  neg_int:
    value: null
    formula: "=INT(-5.9)"         # Expected: -6 (floors toward -inf)
  neg_trunc:
    value: null
    formula: "=TRUNC(-5.9)"       # Expected: -5 (towards zero)
  neg_sign:
    value: null
    formula: "=SIGN(-999)"        # Expected: -1
  neg_floor:
    value: null
    formula: "=FLOOR(-3.7, 1)"    # Expected: -4
  neg_ceiling:
    value: null
    formula: "=CEILING(-3.2, 1)"  # Expected: -3
  neg_roundup:
    value: null
    formula: "=ROUNDUP(-3.2, 0)"  # Expected: -4 (away from zero)
  neg_rounddown:
    value: null
    formula: "=ROUNDDOWN(-3.8, 0)" # Expected: -3 (towards zero)
  neg_power_exp:
    value: null
    formula: "=POWER(2, -3)"      # Expected: 0.125
  neg_exp:
    value: null
    formula: "=EXP(-100)"         # Expected: ~0 (very small)

  # ═══════════════════════════════════════════════════════════════════════════
  # EDGE CASES: Large numbers
  # ═══════════════════════════════════════════════════════════════════════════
  large_abs:
    value: null
    formula: "=ABS(-999999999)"   # Expected: 999999999
  large_sqrt:
    value: null
    formula: "=SQRT(1000000)"     # Expected: 1000
  large_power:
    value: null
    formula: "=POWER(10, 6)"      # Expected: 1000000
  large_log10:
    value: null
    formula: "=LOG10(1000000)"    # Expected: 6
  large_ln:
    value: null
    formula: "=LN(1000000)"       # Expected: ~13.8155
  large_exp:
    value: null
    formula: "=EXP(10)"           # Expected: ~22026.46

  # ═══════════════════════════════════════════════════════════════════════════
  # EDGE CASES: Small numbers (near zero)
  # ═══════════════════════════════════════════════════════════════════════════
  small_abs:
    value: null
    formula: "=ABS(0.0001)"       # Expected: 0.0001
  small_sqrt:
    value: null
    formula: "=SQRT(0.0001)"      # Expected: 0.01
  small_ln:
    value: null
    formula: "=LN(0.0001)"        # Expected: ~-9.21
  small_log10:
    value: null
    formula: "=LOG10(0.0001)"     # Expected: -4
  small_sign_pos:
    value: null
    formula: "=SIGN(0.00001)"     # Expected: 1
  small_sign_neg:
    value: null
    formula: "=SIGN(-0.00001)"    # Expected: -1

  # ═══════════════════════════════════════════════════════════════════════════
  # EDGE CASES: Precision tests
  # ═══════════════════════════════════════════════════════════════════════════
  precision_round_half:
    value: null
    formula: "=ROUND(2.5, 0)"     # Expected: 3 or 2 (banker's)
  precision_round_half_neg:
    value: null
    formula: "=ROUND(-2.5, 0)"    # Expected: -3 or -2 (banker's)
  precision_round_many_decimals:
    value: null
    formula: "=ROUND(3.141592653589793, 10)" # Expected: 3.1415926536
  precision_pi:
    value: null
    formula: "=ROUND(PI(), 6)"    # Expected: 3.141593
  precision_e:
    value: null
    formula: "=ROUND(E(), 6)"     # Expected: 2.718282
  precision_sqrt2:
    value: null
    formula: "=ROUND(SQRT(2), 6)" # Expected: 1.414214
  precision_ln_e:
    value: null
    formula: "=ROUND(LN(E()), 6)" # Expected: 1.0
  precision_radians_degrees:
    value: null
    formula: "=ROUND(DEGREES(RADIANS(180)), 6)" # Expected: 180.0

  # ═══════════════════════════════════════════════════════════════════════════
  # EDGE CASES: Identity operations
  # ═══════════════════════════════════════════════════════════════════════════
  identity_power_one:
    value: null
    formula: "=POWER(42, 1)"      # Expected: 42
  identity_power_zero:
    value: null
    formula: "=POWER(42, 0)"      # Expected: 1
  identity_sqrt_square:
    value: null
    formula: "=SQRT(POWER(5, 2))" # Expected: 5
  identity_ln_exp:
    value: null
    formula: "=LN(EXP(1))"        # Expected: 1
  identity_exp_ln:
    value: null
    formula: "=EXP(LN(10))"       # Expected: 10
  identity_radians_degrees:
    value: null
    formula: "=DEGREES(RADIANS(45))" # Expected: 45

  # ═══════════════════════════════════════════════════════════════════════════
  # EDGE CASES: Combined operations
  # ═══════════════════════════════════════════════════════════════════════════
  combined_abs_sqrt:
    value: null
    formula: "=SQRT(ABS(-16))"    # Expected: 4
  combined_round_power:
    value: null
    formula: "=ROUND(POWER(2, 0.5), 4)" # Expected: 1.4142
  combined_floor_ceil:
    value: null
    formula: "=FLOOR(5, 1) + CEILING(5, 1)" # Expected: 10
  combined_log_exp:
    value: null
    formula: "=LOG10(POWER(10, 3))" # Expected: 3
  combined_pi_radians:
    value: null
    formula: "=RADIANS(180) / PI()" # Expected: 1.0
  combined_sign_abs:
    value: null
    formula: "=SIGN(-5) * ABS(-5)" # Expected: -5
  combined_int_mod:
    value: null
    formula: "=INT(17.5) + MOD(17, 5)" # Expected: 19

  # ═══════════════════════════════════════════════════════════════════════════
  # EDGE CASES: Boundary values for significance
  # ═══════════════════════════════════════════════════════════════════════════
  sig_floor_tenth:
    value: null
    formula: "=FLOOR(3.14159, 0.1)" # Expected: 3.1
  sig_ceiling_tenth:
    value: null
    formula: "=CEILING(3.14159, 0.1)" # Expected: 3.2
  sig_floor_hundredth:
    value: null
    formula: "=FLOOR(3.14159, 0.01)" # Expected: 3.14
  sig_ceiling_hundredth:
    value: null
    formula: "=CEILING(3.14159, 0.01)" # Expected: 3.15
  sig_floor_5:
    value: null
    formula: "=FLOOR(23, 5)"      # Expected: 20
  sig_ceiling_5:
    value: null
    formula: "=CEILING(23, 5)"    # Expected: 25
  sig_floor_10:
    value: null
    formula: "=FLOOR(87, 10)"     # Expected: 80
  sig_ceiling_10:
    value: null
    formula: "=CEILING(87, 10)"   # Expected: 90

  # ═══════════════════════════════════════════════════════════════════════════
  # EDGE CASES: Special mathematical values
  # ═══════════════════════════════════════════════════════════════════════════
  special_one_raised:
    value: null
    formula: "=POWER(1, 1000)"    # Expected: 1
  special_zero_raised:
    value: null
    formula: "=POWER(0, 100)"     # Expected: 0
  special_negative_one:
    value: null
    formula: "=POWER(-1, 2)"      # Expected: 1
  special_negative_one_odd:
    value: null
    formula: "=POWER(-1, 3)"      # Expected: -1
  special_log_one:
    value: null
    formula: "=LOG10(1)"          # Expected: 0
  special_ln_one:
    value: null
    formula: "=LN(1)"             # Expected: 0
  special_sqrt_one:
    value: null
    formula: "=SQRT(1)"           # Expected: 1

  # ═══════════════════════════════════════════════════════════════════════════
  # EDGE CASES: Rounding at boundaries
  # ═══════════════════════════════════════════════════════════════════════════
  bound_round_up_exact:
    value: null
    formula: "=ROUNDUP(2.0, 0)"   # Expected: 2
  bound_round_down_exact:
    value: null
    formula: "=ROUNDDOWN(2.0, 0)" # Expected: 2
  bound_trunc_exact:
    value: null
    formula: "=TRUNC(5.0)"        # Expected: 5
  bound_int_exact:
    value: null
    formula: "=INT(5.0)"          # Expected: 5
  bound_floor_exact:
    value: null
    formula: "=FLOOR(10.0, 5)"    # Expected: 10
  bound_ceiling_exact:
    value: null
    formula: "=CEILING(10.0, 5)"  # Expected: 10
