# E2E Math Function Validation (Extended)
# Functions added in v5.19.0 demo expansion

_forge_version: "1.0.0"

assumptions:
  # INT - integer part
  test_int_positive:
    value: null
    formula: "=INT(5.9)"                   # Expected: 5
    expected: 5
  test_int_negative:
    value: null
    formula: "=INT(-5.9)"                  # Expected: -6 (rounds toward negative infinity)
    expected: -6
  test_int_zero:
    value: null
    formula: "=INT(0.5)"                   # Expected: 0
    expected: 0

  # SIGN - sign of number
  test_sign_positive:
    value: null
    formula: "=SIGN(42)"                   # Expected: 1
    expected: 1
  test_sign_negative:
    value: null
    formula: "=SIGN(-42)"                  # Expected: -1
    expected: -1
  test_sign_zero:
    value: null
    formula: "=SIGN(0)"                    # Expected: 0
    expected: 0

  # TRUNC - truncate to integer
  test_trunc_positive:
    value: null
    formula: "=TRUNC(5.9)"                 # Expected: 5
    expected: 5
  test_trunc_negative:
    value: null
    formula: "=TRUNC(-5.9)"                # Expected: -5 (different from INT)
    expected: -5
  test_trunc_decimal:
    value: null
    formula: "=TRUNC(5.678, 2)"            # Expected: 5.67
    expected: 5.67

  # Note: GCD, LCM, FACT, FACTDOUBLE, COMBIN, PERMUT functions are not implemented in forge
  # These tests are disabled until forge adds these functions
  # See backlog in roadmap.yaml for tracking

  # RAND - random number (0-1)
  # Can't test exact value, but test it returns in range
  test_rand_range:
    value: null
    formula: "=IF(AND(RAND()>=0, RAND()<=1), 1, 0)" # Expected: 1
    expected: 1

  # RANDBETWEEN
  test_randbetween_range:
    value: null
    formula: "=IF(AND(RANDBETWEEN(1, 10)>=1, RANDBETWEEN(1, 10)<=10), 1, 0)" # Expected: 1
    expected: 1

  # Note: EVEN and ODD functions are not implemented in forge
  # Use CEILING/FLOOR with ISEVEN/ISODD for equivalent functionality
